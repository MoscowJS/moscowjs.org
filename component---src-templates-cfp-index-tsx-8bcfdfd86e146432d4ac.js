"use strict";(self.webpackChunkmoscowjs_org=self.webpackChunkmoscowjs_org||[]).push([[914],{7901:function(e,t,a){a.d(t,{$n:function(){return I},WI:function(){return x},pd:function(){return E},l6:function(){return N},TM:function(){return _}});var n=a(6540),r=a(2240),o=a(6506),c=a(5579),l=a(8950),s=a(4276),i=(a(691),a(4614)),u=a(9565),d=a(4529),m=a(8842),p=[].concat(["state","setState"],["value","checked"]);function g(e){return void 0!==e.checked?e.checked:void 0===e.value?!!e.state:-1!==(Array.isArray(e.state)?e.state:[]).indexOf(e.value)}var f=(0,l.a)({name:"Checkbox",compose:u.I,keys:p,useOptions:function(e,t){var a=t.value,n=t.checked,r=e.unstable_clickOnEnter,c=void 0!==r&&r,l=(0,o._)(e,["unstable_clickOnEnter"]);return(0,o.a)({unstable_clickOnEnter:c,value:a,checked:g((0,o.a)({checked:n},l))},l)},useProps:function(e,t){var a=t.ref,r=t.onChange,c=t.onClick,l=(0,o._)(t,["ref","onChange","onClick"]),u=(0,n.useRef)(null),p=(0,n.useState)(!0),g=p[0],f=p[1],h=(0,i.h)(r),b=(0,i.h)(c);(0,n.useEffect)((function(){var e=u.current;e&&("INPUT"===e.tagName&&"checkbox"===e.type||f(!1))}),[]),function(e,t){(0,n.useEffect)((function(){var a=e.current;a&&("indeterminate"===t.state?a.indeterminate=!0:a.indeterminate&&(a.indeterminate=!1))}),[t.state,e])}(u,e);var v=(0,n.useCallback)((function(t){var a=t.currentTarget;if(e.disabled)return t.stopPropagation(),void t.preventDefault();if(h.current&&(g||(a.checked=!a.checked),h.current(t)),e.setState)if(void 0===e.value)e.setState(!e.checked);else{var n=Array.isArray(e.state)?e.state:[],r=n.indexOf(e.value);-1===r?e.setState([].concat(n,[e.value])):e.setState((0,d.w)(n,r))}}),[e.disabled,g,e.setState,e.value,e.checked,e.state]),x=(0,n.useCallback)((function(e){var t;null===(t=b.current)||void 0===t||t.call(b,e),e.defaultPrevented||g||function(e,t){var a=(0,m.l)(e,"change");Object.defineProperties(a,{type:{value:"change"},target:{value:e},currentTarget:{value:e}}),null==t||t(a)}(e.currentTarget,v)}),[g,v]);return(0,o.a)({ref:(0,s.N)(u,a),role:g?void 0:"checkbox",type:g?"checkbox":void 0,value:g?e.value:void 0,checked:e.checked,"aria-checked":"indeterminate"===e.state?"mixed":e.checked,onChange:v,onClick:x},l)}}),h=(0,c.a)({as:"input",memo:!0,useHook:f}),b=a(6127);const v=r.default.label.withConfig({displayName:"checkboxToggle__CheckboxToggleContainer",componentId:"sc-1nz0pw8-0"})(["display:inline-flex;flex-direction:row;align-items:center;cursor:pointer;vertical-align:middle;.checkbox-toggle-input{width:0;height:0;opacity:0;}.checkbox-toggle-faux{display:block;width:",";height:",";transition:all 0.3s ease;border-radius:",";border:"," solid rgba(120,120,120,0.2);background-color:rgba(120,120,120,0.1);position:relative;&:after{content:'';top:0px;bottom:0px;margin:auto;width:",";height:",";transition:all 0.3s ease;border-radius:",";background-color:rgba(0,0,0,0.7);background-size:"," ",";background-position:center;background-repeat:no-repeat;background-image:",";position:absolute;box-sizing:border-box;transform:translateX(0);}}.checkbox-toggle-input:checked + .checkbox-toggle-faux{background-color:var(--color-primary);&:after{box-shadow:none;transform:translateX(",");background-image:",";}}.checkbox-toggle-label{margin-left:0.75rem;}&:hover{.checkbox-toggle-faux{background-color:rgba(120,120,120,0.6);}.checkbox-toggle-input:checked + .checkbox-toggle-faux{background-color:var(--color-primary-darker);}}.checkbox-toggle-input:focus + .checkbox-toggle-faux{box-shadow:var(--color-outline);}"],(0,b.di)(1.6),(0,b.di)(1),(0,b.di)(.5),(0,b.di)(.1),(0,b.di)(.8),(0,b.di)(.8),(0,b.di)(.4),(0,b.di)(.6),(0,b.di)(.6),(e=>{let{imageOff:t}=e;return t?`url(${t})`:"none"}),(0,b.di)(.6),(e=>{let{imageOn:t}=e;return t?`url(${t})`:"none"})),x=e=>{let{children:t,imageOn:a,imageOff:r,className:o,...c}=e;return n.createElement(v,{className:o,imageOn:a,imageOff:r},n.createElement(h,Object.assign({className:"checkbox-toggle-input"},c)),n.createElement("span",{className:"checkbox-toggle-faux"}),t&&n.createElement("span",{className:"checkbox-toggle-label"},t))};var k=a(5657),w=(0,l.a)({name:"Input",compose:k.b,keys:[]}),y=(0,c.a)({as:"input",memo:!0,useHook:w});const E=(0,r.default)(y).withConfig({displayName:"input__Input",componentId:"sc-ctek8b-0"})(["border:none;transition:box-shadow 0.2s linear;background:transparent;box-shadow:var(--color-primary) 0px 1px;color:var(--color-text);&:focus{box-shadow:var(--color-primary) 0px 3px;}"]),C=r.default.textarea.withConfig({displayName:"textarea__TextareaInner",componentId:"sc-1gfv6rv-0"})(["display:block;border:none;transition:box-shadow 0.2s ease;font-family:inherit;font-size:inherit;background:transparent;box-shadow:var(--color-primary) 0px 1px;color:var(--color-text);resize:none;overflow-x:hidden;overflow-wrap:break-word;&:focus{box-shadow:var(--color-primary) 0px 3px;}"]),_=e=>{let{onChange:t,rows:a=1,autosize:r,value:o,defaultValue:c,...l}=e;const s=(0,n.useRef)(null),{0:i,1:u}=(0,n.useState)(null);(0,n.useEffect)((()=>{var e;null!=s&&s.current&&u(((null===(e=s.current)||void 0===e?void 0:e.scrollHeight)-4)/a)}),[s,s.current]);const d=(0,n.useCallback)((e=>{if(t&&t(e),!r)return;e.target.rows=a;const n=~~(e.target.scrollHeight/i);e.target.rows=n}),[t,i]);return n.createElement(y,Object.assign({},l,{onChange:d}),(e=>n.createElement(C,Object.assign({},e,{ref:s,rows:a,value:o,defaultValue:c}))))};var S=a(9631);const I=(0,r.default)(S.$).withConfig({displayName:"button__Button",componentId:"sc-9ci6zf-0"})(["cursor:pointer;border:2px solid var(--color-primary);background:transparent;color:var(--color-text);&:hover{background:rgba(125,125,125,0.5);}&:active{background:rgba(125,125,125,0.8);}&:focus{box-shadow:var(--color-outline);}&[disabled]:hover,&[disabled]:active{background:none;cursor:initial;}"]),N=r.default.select.withConfig({displayName:"select__Select",componentId:"sc-1xu2a6k-0"})(["border:none;transition:box-shadow 0.2s linear;background:transparent;box-shadow:var(--color-primary) 0px 1px;color:var(--color-text);max-width:100%;width:100%;&:focus{box-shadow:var(--color-primary) 0px 3px;}"])},3108:function(e,t,a){a.r(t),a.d(t,{default:function(){return h}});var n=a(6540),r=a(9328),o=a(1118),c=a(2240),l=a(7901);const s=c.default.sup.withConfig({displayName:"cfp__YellowStar",componentId:"sc-gtdjqn-0"})(["color:var(--color-primary);"]);var i=()=>{const{0:e,1:t}=(0,n.useState)(!1),{0:a,1:r}=(0,n.useState)(!1),{0:o,1:c}=(0,n.useState)({name:"",contacts:"",title:"",theses:"",message:"",accept:"false"}),{0:i,1:f}=(0,n.useState)(null),h=e=>{const{name:t,value:a}=e.target;c((e=>({...e,[t]:a})))},b=e=>{const{name:t,value:a}=e.currentTarget;c((e=>({...e,[t]:a})))};return n.createElement(n.Fragment,null,n.createElement("h2",null,"Call for Papers"),n.createElement("form",{role:"form",onSubmit:async e=>{if(e.preventDefault(),o.accept){r(!0),f(null);try{const e=await fetch("https://bff.moscowjs.org/api/v1/cfp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(e.ok)f({success:!0,message:"Заявка успешно отправлена! Мы свяжемся с вами в ближайшее время."}),c({name:"",contacts:"",title:"",theses:"",message:"",accept:"false"}),t(!1);else{const t=await e.json().catch((()=>null));f({success:!1,message:(null==t?void 0:t.message)||"Произошла ошибка при отправке заявки. Пожалуйста, попробуйте еще раз."})}}catch(a){f({success:!1,message:"Произошла ошибка при отправке заявки. Пожалуйста, попробуйте еще раз."})}finally{r(!1)}}else f({success:!1,message:"Необходимо согласиться с правилами поведения MoscowJS"})}},n.createElement("p",null,n.createElement("label",{htmlFor:"cfp-name"},"Как к тебе обращаться? ",n.createElement(s,null,"*")),n.createElement(u,{required:!0,name:"name",id:"cfp-name",placeholder:"My Name Is",value:o.name,onChange:h})),n.createElement("p",null,n.createElement("label",{htmlFor:"cfp-contacts"},"Как с тобой лучше связаться? ",n.createElement(s,null,"*")),n.createElement("p",null,n.createElement("small",null,"Укажите удобный для тебя вид связи. Например, @my-telegram-id")),n.createElement(d,{required:!0,name:"contacts",id:"cfp-contacts",placeholder:"@my-telegram-id",value:o.contacts,onChange:h})),n.createElement("p",null,n.createElement("label",{htmlFor:"cfp-title"},"Название доклада ",n.createElement(s,null,"*")),n.createElement(m,{required:!0,name:"title",id:"cfp-title",placeholder:"My awesome speech",value:o.title,onChange:h})),n.createElement("p",null,n.createElement("label",{htmlFor:"cfp-theses"},"О чем будешь рассказывать? ",n.createElement(s,null,"*")),n.createElement("p",null,n.createElement("small",null,"Напиши основные тезисы или идею твоего доклада. Всего пара-тройка предложений, но организаторам будет намного понятней.")),n.createElement(p,{required:!0,rows:3,name:"theses",placeholder:"Theses #1 ...",value:o.theses,onChange:b})),n.createElement("p",null,n.createElement("label",{htmlFor:"cfp-message"},"Дополнительная информация"),n.createElement("p",null,n.createElement("small",null,"Любая информация, которой ты хотел бы поделиться с организаторами.")),n.createElement(g,{rows:3,name:"message",placeholder:"Extra information ...",value:o.message,onChange:b})),n.createElement("p",null,n.createElement("label",{htmlFor:"cfp-accept"},"Отправляя эту заявку я соглашаюсь с Правилами поведения MoscowJS",n.createElement(s,null," *")),n.createElement("br",null),n.createElement(l.WI,{checked:e,onChange:()=>{t((e=>!e)),c((t=>({...t,accept:e?"false":"true"})))},required:!0,name:"accept",id:"cfp-accept"})),n.createElement("p",null,n.createElement(l.$n,{type:"submit",disabled:a},a?"Отправляется...":"Отправить")),i&&n.createElement("div",{style:{marginTop:"16px",padding:"12px",borderRadius:"4px",backgroundColor:i.success?"#d4edda":"#f8d7da",color:i.success?"#155724":"#721c24",border:"1px solid "+(i.success?"#c3e6cb":"#f5c6cb")}},i.message)))},u=(0,c.default)(l.pd).withConfig({displayName:"cfp___StyledInput",componentId:"sc-gtdjqn-1"})(["width:100%;"]),d=(0,c.default)(l.pd).withConfig({displayName:"cfp___StyledInput2",componentId:"sc-gtdjqn-2"})(["width:100%;"]),m=(0,c.default)(l.pd).withConfig({displayName:"cfp___StyledInput3",componentId:"sc-gtdjqn-3"})(["width:100%;"]),p=(0,c.default)(l.TM).withConfig({displayName:"cfp___StyledTextarea",componentId:"sc-gtdjqn-4"})(["width:100%;"]),g=(0,c.default)(l.TM).withConfig({displayName:"cfp___StyledTextarea2",componentId:"sc-gtdjqn-5"})(["width:100%;"]),f=a(6137);var h=e=>{var t,a;let{data:c,location:l}=e;const{pages_by_id:s,config:u}=c.directus,d=(0,o.N)(u),m=null!==(t=null==d||null===(a=d.cfpform)||void 0===a?void 0:a.value)&&void 0!==t?t:"directus";return n.createElement(n.Fragment,null,n.createElement(f.A,{title:s.title}),n.createElement(r.Y9,{location:l}),n.createElement(r.mc,{as:"main"},"directus"===m&&n.createElement(i,null),"airtable"===m&&n.createElement("iframe",{src:"https://airtable.com/embed/appV8iIxl39lc20bh/pag57KTKlKuiOgmvH/form",style:{width:"100%",height:"533px",border:"none"}}),"typeform"===m&&n.createElement("iframe",{src:"https://form.typeform.com/to/ogjLwQex?typeform-medium=embed-snippet",style:{width:"100%",height:"500px",border:"none"}}),n.createElement(r.oz,null,s.content)),n.createElement(r.wi,null))}},1118:function(e,t,a){a.d(t,{N:function(){return n}});const n=e=>e.reduce(((e,t)=>(e[t.name]=t,e)),{})}}]);
//# sourceMappingURL=component---src-templates-cfp-index-tsx-8bcfdfd86e146432d4ac.js.map